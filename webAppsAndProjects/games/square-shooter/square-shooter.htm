<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>square-shooter</title>
    <link rel="stylesheet" href="index.css">
    <!-- <link rel="stylesheet" href="js/copy-code.css"> -->
    <script src="js/square-shooter.js" defer></script>
    <script src="../../../js/homeLinkFocus.js" defer></script>
    
    <!-- <script src="../../../js/copy-code.js" defer></script> -->
</head>
<body>
    <a tabindex="1" id="homeLink" href="../../webAppsAndProjects.html">home- Websites Apps and Projects</a>
    <header>
        <h1>square-shooter</h1>
        <a tabindex="1" id="tutorialLink" target="_blank" href="https://www.youtube.com/watch?v=4q2vvZn5aoo">tutorial</a>    
    </header>
    <canvas autofocus  tabindex="1"></canvas>
    <div class="code-container">
        <pre tabindex="1" class="copy-code">
            const canvas = document.querySelector('canvas')
const c = canvas.getContext('2d')

canvas.style.border = '2px solid blue'
canvas.width = innerWidth
canvas.height = innerHeight * .8

const scale = .04
const gravity = .2
const xVelocity = 5
const yVelocity = 2

class Player{
    constructor(){
        this.position = {
            x: 200,
            y: 200
        }
        this.velocity = {
            x: 0,
            y: yVelocity
        }
        this.width = canvas.width * scale,
        this.height = canvas.width * scale
    }
    draw(){
        c.fillStyle = 'blue'
        c.fillRect(this.position.x,this.position.y,this.width,this.height)
    }
    update(){
        this.draw()
        
        if(this.position.y + this.height < canvas.height){
            this.velocity.y += gravity
            this.position.y += this.velocity.y
        }
    }
}

const player = new Player()
const keys = {
    a: {
        pressed: false
    },
    w: {
        pressed: false
    },
    d: {
        pressed: false
    }
}
function animate(){
    requestAnimationFrame(animate)
    c.clearRect(0,0,canvas.width,canvas.height)
    player.update()

    if(keys.w.pressed){
        player.velocity.y += -4
    } else {
        // player.velocity.y = yVelocity
    }
    if(keys.d.pressed && player.position.x < canvas.width * .4){
        player.position.x += xVelocity
    }

    if(keys.a.pressed && player.position.x > canvas.width * .04){
        player.position.x -= xVelocity
    }
}
animate()

addEventListener('keydown', e => {
    let letter = e.key.toLowerCase()
    switch(letter){
        case 'a':
            keys.a.pressed = true
            console.log('left')
            break
        case 'w':
            keys.w.pressed = true
            console.log('up')
            break
        case 'd':
            keys.d.pressed = true
            console.log('right')
            break;
        default:
            break
     }
});
addEventListener('keyup', e => {
    let letter = e.key.toLowerCase()
    switch(letter){
        case 'a':
            keys.a.pressed = false
            break
        case 'w':
            keys.w.pressed = false
            break
        case 'd':
            keys.d.pressed = false
            break;
        default:
            break
     }
});
        </pre>
    </div>
    
    
</body>
</html>